<!-- src/app/pages/progetti/progetto-detail/progetto-detail.component.html -->
<section class="project-detail-section">
  <mat-card class="project-detail-card mat-elevation-z4" *ngIf="progettoData; else loadingOrError">
    <mat-card-header>
      <mat-card-title>{{ progettoData.titolo }}</mat-card-title>
    </mat-card-header>

    <img mat-card-image [src]="progettoData.immagine || 'https://placehold.co/800x500/1a1a2e/00bcd4?text=Dettaglio+Progetto'" [alt]="progettoData.titolo" class="project-image" />

    <mat-card-content>
      <p class="description">{{ progettoData.descrizione }}</p>

      <h3>Tecnologie utilizzate</h3>
      <mat-chip-listbox aria-label="Tecnologie usate" class="tech-chips-container">
        <mat-chip-row *ngFor="let tech of progettoData.tecnologie" color="accent">
          {{ tech }}
        </mat-chip-row>
      </mat-chip-listbox>

      <!-- Sezione per le funzionalità/caratteristiche -->
      <ng-container *ngIf="progettoData.caratteristiche && progettoData.caratteristiche.length > 0">
        <h3>Funzionalità Principali</h3>
        <ul>
          <li *ngFor="let feature of progettoData.caratteristiche">{{ feature }}</li>
        </ul>
      </ng-container>

      <!-- NUOVI BLOCCHI PER I DETTAGLI AGGIUNTIVI -->
      <ng-container *ngIf="progettoData.sfideAffrontate && progettoData.sfideAffrontate.length > 0">
        <h3>Sfide Affrontate</h3>
        <ul>
          <li *ngFor="let challenge of progettoData.sfideAffrontate">{{ challenge }}</li>
        </ul>
      </ng-container>

      <ng-container *ngIf="progettoData.soluzioniImplementate && progettoData.soluzioniImplementate.length > 0">
        <h3>Soluzioni Implementate</h3>
        <ul>
          <li *ngFor="let solution of progettoData.soluzioniImplementate">{{ solution }}</li>
        </ul>
      </ng-container>

      <ng-container *ngIf="progettoData.risultatiChiave && progettoData.risultatiChiave.length > 0">
        <h3>Risultati Chiave</h3>
        <ul>
          <li *ngFor="let result of progettoData.risultatiChiave">{{ result }}</li>
        </ul>
      </ng-container>

      <ng-container *ngIf="progettoData.architettura">
        <h3>Architettura</h3>
        <p>{{ progettoData.architettura }}</p>
      </ng-container>

      <ng-container *ngIf="progettoData.fasiDiSviluppo && progettoData.fasiDiSviluppo.length > 0">
        <h3>Fasi di Sviluppo</h3>
        <ul>
          <li *ngFor="let phase of progettoData.fasiDiSviluppo">{{ phase }}</li>
        </ul>
      </ng-container>

      <ng-container *ngIf="progettoData.targetAudience">
        <h3>Target Audience</h3>
        <p>{{ progettoData.targetAudience }}</p>
      </ng-container>

      <ng-container *ngIf="progettoData.aspectsCovered && progettoData.aspectsCovered.length > 0">
        <h3>Aspetti Coperti</h3>
        <ul>
          <li *ngFor="let aspect of progettoData.aspectsCovered">{{ aspect }}</li>
        </ul>
      </ng-container>

    </mat-card-content>

    <mat-card-actions class="project-links">
      <a *ngIf="progettoData.linkDemo" mat-raised-button color="accent" [href]="progettoData.linkDemo" target="_blank" rel="noopener">
        <mat-icon>launch</mat-icon> Vai al progetto
      </a>
      <a *ngIf="progettoData.linkRepo" mat-stroked-button color="primary" [href]="progettoData.linkRepo" target="_blank" rel="noopener">
        <mat-icon>code</mat-icon> Codice sorgente
      </a>
    </mat-card-actions>

    <mat-divider class="mat-divider-margin"></mat-divider>

    <button mat-button routerLink="/progetti" class="back-button">
      <mat-icon>arrow_back</mat-icon> Torna ai Progetti
    </button>
  </mat-card>

  <ng-template #loadingOrError>
    <div *ngIf="loading" class="loading-spinner">
      <mat-spinner color="accent"></mat-spinner>
      <p>Caricamento dettaglio progetto...</p>
    </div>
    <div *ngIf="errore" class="error-message mat-elevation-z2">
      <mat-icon color="warn">error_outline</mat-icon>
      <p>{{ errore }}</p>
      <button mat-button routerLink="/progetti" class="back-button">
        <mat-icon>arrow_back</mat-icon> Torna ai Progetti
      </button>
    </div>
  </ng-template>
</section>
